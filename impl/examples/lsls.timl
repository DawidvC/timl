structure LsLs = struct

open List

datatype lsls 'a {m : Nat} : {Nat} =
         Nil2 of lsls 'a {m} {0}
       | Cons2 {n m' : Nat} {m' <= m} of list 'a {m'} * lsls 'a {m} {n} --> lsls 'a {m} {n+1}

fun map2 ['a 'b] {m n : Nat} (f : forall {m : Nat}, list 'a {m} -- $(m*m) --> 'b) (l : lsls 'a {m} {n}) return list 'b {n} using $(m * m + 3) * $n =
    case l of
        Nil2 => []
      | Cons2 (x, xs) => f x :: map2 @f xs

end
